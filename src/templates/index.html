<!DOCTYPE html>
<html lang="en">
<head>
   <style>
      body {
        background-image: url('/static/backai.jpg');
      }
      #processDiv{
         left: 40%;
         position: relative;
         margin: 50px 50px;
      }
      </style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
<script>
      $(document).ready(function(){
               

               
               $("#process").on('click',function(){
                     $.post("http://127.0.0.1:5000/uploader",function(response){

                        var esg = response['chart'];
                        console.log('Chart',esg)
                        var options = {
                              title: {
                                 text: "ESG SCORE"
                              },
                              data: [{
                                    type: "pie",
                                    startAngle: 45,
                                    showInLegend: "true",
                                    legendText: "{label}",
                                    indexLabel: "{label} ({y})",
                                    yValueFormatString:"#,##0.#"%"",
                                    dataPoints: [
                                       { label: "Environmental", y: esg['Environmental'] },
                                       { label: "Social Marketing", y: esg['Social'] },
                                       { label: "Goverance", y: esg['Goverance'] },
                                       { label: "Other", y: esg['None'] }
                                    ]
                              }]
                           };
                           $("#myPieChart").CanvasJSChart(options);
               });
            });
      });
</script>

</script>
   <body >
      <form action="">
         <div id="processDiv">
            <input type="button" id="process" value="Process">
         </div>
         <div id="myPieChart"/>
     </form>
   </body>
</html>